(this["webpackJsonplista-de-notas-react"]=this["webpackJsonplista-de-notas-react"]||[]).push([[0],{42:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(17),c=n.n(r),o=n(4),s=n.n(o),i=n(5),u=n(8),l=n(3),j=n(0),d=function(e){var t=e.note,n=e.toggleImportance,a=t.important?"make not important":"make important";return Object(j.jsxs)("li",{className:"note",children:[t.content,Object(j.jsx)("button",{onClick:n,children:a})]})},b=function(){return Object(j.jsxs)("div",{style:{color:"black",fontStyle:"italic",fontSize:16},children:[" ",Object(j.jsx)("br",{})," ",Object(j.jsx)("em",{children:"Note app, Giancarlo Guerra 2021"})," "]})},f=function(e){var t=e.message;return null===t?null:Object(j.jsx)("div",{className:"success",children:t})},p=function(e){var t=e.message;return null===t?null:Object(j.jsx)("div",{className:"error",children:t})},h=function(e){var t=Object(a.useState)(!1),n=Object(l.a)(t,2),r=n[0],c=n[1],o={display:r?"none":""},s={display:r?"":"none"},i=function(){c(!r)};return Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{style:o,children:Object(j.jsx)("button",{onClick:i,children:e.buttonLabel})}),Object(j.jsxs)("div",{style:s,children:[e.children,Object(j.jsx)("button",{onClick:i,children:"cancel"})]})]})},O=function(e){var t=e.handleLogin,n=e.handleUsername,a=e.handlePassword,r=e.username,c=e.password;return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("div",{children:Object(j.jsxs)("form",{onSubmit:t,children:[Object(j.jsxs)("div",{children:["username",Object(j.jsx)("input",{type:"text",value:r,name:"Username",onChange:n})]}),Object(j.jsxs)("div",{children:["password",Object(j.jsx)("input",{type:"password",value:c,name:"Password",onChange:a})]}),Object(j.jsx)("button",{type:"submit",children:"Log in"})]})})})},m=function(e){var t=e.addNote,n=e.newNote,a=e.handleNoteChange,r=e.name;return Object(j.jsxs)("di",{children:[Object(j.jsxs)("h2",{children:["hola ",r," \ud83d\udd90"]}),Object(j.jsxs)("form",{onSubmit:t,children:[Object(j.jsx)("input",{value:n,onChange:a,placeholder:"Agregar nueva nota..."}),Object(j.jsx)("button",{type:"submit",children:"save"})]})]})},x=n(6),v=n.n(x),g="/api/notes",w=null,S={getAll:function(){return v.a.get(g).then((function(e){return e.data}))},create:function(){var e=Object(i.a)(s.a.mark((function e(t){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:w}},e.next=3,v.a.post(g,t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(e,t){return v.a.put("".concat(g,"/").concat(e),t).then((function(e){return e.data}))},setToken:function(e){w="bearer ".concat(e)}},k={login:function(){var e=Object(i.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},N=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),o=Object(l.a)(c,2),x=o[0],v=o[1],g=Object(a.useState)(!0),w=Object(l.a)(g,2),N=w[0],y=w[1],C=Object(a.useState)(null),I=Object(l.a)(C,2),L=I[0],T=I[1],U=Object(a.useState)(null),A=Object(l.a)(U,2),J=A[0],D=A[1],E=Object(a.useState)(""),P=Object(l.a)(E,2),z=P[0],G=P[1],B=Object(a.useState)(""),F=Object(l.a)(B,2),M=F[0],W=F[1],q=Object(a.useState)(null),H=Object(l.a)(q,2),K=H[0],Q=H[1];Object(a.useEffect)((function(){S.getAll().then((function(e){r(e)}))}),[]),Object(a.useEffect)((function(){var e=window.localStorage.getItem("loggedNoteappUser");if(e){var t=JSON.parse(e);Q(t),S.setToken(t.token)}}),[]);var R=N?n:n.filter((function(e){return!0===e.important})),V=function(){var e=Object(i.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,k.login({username:z,password:M});case 4:n=e.sent,window.localStorage.setItem("loggedNoteappUser",JSON.stringify(n)),S.setToken(n.token),Q(n),G(""),W(""),T("Login exitoso"),setTimeout((function(){T(null)}),5e3),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),D("Wrong credentials"),setTimeout((function(){D(null)}),5e3);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{children:[Object(j.jsx)("h1",{children:"Notes"}),Object(j.jsx)(p,{message:J}),Object(j.jsx)(f,{message:L}),null===K?Object(j.jsx)(h,{buttonLabel:"log in",children:Object(j.jsx)(O,{handleLogin:V,handlePassword:function(e){var t=e.target;return W(t.value)},handleUsername:function(e){var t=e.target;return G(t.value)},username:z,password:M})}):Object(j.jsx)(m,{addNote:function(e){e.preventDefault();var t={content:x,date:(new Date).toISOString(),important:Math.random()<.5,id:n.length+1};S.create(t).then((function(e){T("Nota creada exitosamente"),setTimeout((function(){T(null)}),5e3),r(n.concat(e)),v("")}))},name:K.name,newNote:x,handleNoteChange:function(e){v(e.target.value)}}),Object(j.jsx)("div",{children:Object(j.jsxs)("button",{onClick:function(){return y(!N)},children:["show ",N?"important":"all"]})}),Object(j.jsx)("ul",{children:R.map((function(e){return Object(j.jsx)(d,{note:e,toggleImportance:function(){return function(e){var t=n.find((function(t){return t.id===e})),a=Object(u.a)(Object(u.a)({},t),{},{important:!t.important});S.update(e,a).then((function(t){r(n.map((function(n){return n.id!==e?n:t})))})).catch((function(t){r(n.filter((function(t){return t.id!==e})))}))}(e.id)}},e.id)}))}),Object(j.jsx)(b,{})]})};n(42);c.a.render(Object(j.jsx)(N,{}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.7561eaa5.chunk.js.map